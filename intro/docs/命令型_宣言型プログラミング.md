# 命令型（手続き型）と宣言型

命令型（手続き型）と宣言型の違いを端的に表したのが以下．

- 命令型（手続き型）：**How** you want
- 宣言型：**What** you want

## 命令型プログラミング

命令型プログラミングは「手続き型プログラミング」とほぼ同義で扱われることが多い．
問題の解を得るために，「命令」や命令をひとまとまりに連結した「手続き」を組み合わせて記述していくプログラミング手法．この「手続き」は言語によって名前が異なり，以下のようなものが挙げられる．「関数」がよく聞くことが多いだろうか．

- 関数
- サブルーチン
- プロシージャ
- メソッド

ほとんどのメジャーな言語は命令型に分類される．命令型は，命令の組み合わせによってシステムの状態（変数，オブジェクトなど）を変更する．
複数の命令から参照されている変数がある場合，命令の前後で変数の内容が変更されると思った結果が得られないことがある．
このように，命令の組み合わせで状態が変更されることにより，入力に対して予期せぬ結果が出力されてしまうことを「プログラミングの副作用」という．
命令型のプログラミングではこの「副作用」が起こりやすいと言われている．
その反面，ある命令の計算結果（出力）を次の命令の入力として渡すような，状態遷移のある処理を記述するのに向いている．

処理系（計算手順だと考えれば良い）をブラックボックス化せず記述していくため，性能のチューニングがしやすい．
命令型プログラミングに分類されている言語は業務システムや Web システム等で主流になっているものが多い．

## 宣言型プログラミング

宣言型プログラミングでは，命令型のように**処理の手順を記述するのではなく，問題は何か？という問題の性質や意味，制約を記述する**．
定義した問題の解決に至るまでの処理手順については，プログラミング言語の処理系（コンパイラなど）に任せる考え方である．

宣言型プログラミングで身近な言語に SQL がある．SQL では，どのようなデータを（時にはどのような順序で）取ってくるかを指定するが，データを取ってくるためのプロセスについて記述することはない．
解の出し方は SQL クエリに任せている．C++ と SQL で特定のテーブルのデータを取ってくる場合のコードを比較してみると少し違いが分かるかもしれない．

- SQL（宣言型）

```sql
select * from my_list where idx = 5;
```

- C++（命令型）

```cpp
for (int i = 0; i < my_list.size(); i++) {
    if (i == 5) {
        cout << my_list[i] << "\n";
    }
}
```

C++ では，テーブルを先頭から走査し，インデックスが 5 に等しいときにその要素を出力する，という要素を探す「手順」を記述している（my_list は擬似的な配列で深く考えないでほしい）．
SQL では，「テーブルのインデックスが 5 の要素を出力しろ」という「問題そのもの」を記述している．C++ のコードのように「先頭から見ていく」のような処理手順は記述されていない（処理をする上では先頭から探すかもしれないが）．解の出し方（手順）は処理系が決める．

上記の違いをまとめてみるとイメージが少し湧くようになるかもしれない．

- 命令型：問題を「どのように解くか」（**How**），その手順を記述する．
- 宣言型：問題「そのもの（問題，性質，制約）」（**What**）を記述する．

命令型は問題の解き方，宣言型は問題が何かを定義すること，といっても良いかもしれない．

## 参考

- https://style.potepan.com/articles/12941.html
- https://docs.microsoft.com/ja-jp/dotnet/csharp/programming-guide/concepts/linq/functional-programming-vs-imperative-programming
- https://qiita.com/Hiroyuki_OSAKI/items/f3f88ae535550e95389d
